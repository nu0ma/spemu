FROM golang:1.24-alpine

# Install necessary tools
RUN apk add --no-cache \
    git \
    make \
    curl \
    bash

# Install Google Cloud SDK
RUN curl https://sdk.cloud.google.com | bash
ENV PATH $PATH:/root/google-cloud-sdk/bin

# Install development tools
RUN go install honnef.co/go/tools/cmd/staticcheck@latest && \
    go install golang.org/x/tools/cmd/goimports@latest

# Set working directory
WORKDIR /workspace

# Copy go mod files
COPY go.mod go.sum ./

# Download dependencies
RUN go mod download

# Default command
CMD ["tail", "-f", "/dev/null"]